

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>toyz.utils package &mdash; Toyz 0.0.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Toyz 0.0.0 documentation" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Toyz</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="overview.html#what-is-toyz">What is Toyz?</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#possible-use-cases">Possible Use Cases</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#optional-but-highly-recommended-requirements">Optional (but highly recommended) Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#installing-toyz">Installing Toyz</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#first-time-setup">First Time Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#running-a-toyz-application">Running a Toyz Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#configuring-a-new-toyz-web-application">Configuring a New Toyz Web Application</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="workspaces.html">Workspaces</a><ul>
<li class="toctree-l2"><a class="reference internal" href="workspaces.html#data-sources">Data Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="workspaces.html#tiles">Tiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="workspaces.html#loading-and-saving-a-workspace">Loading and Saving a Workspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="workspaces.html#sharing-workpsaces">Sharing Workpsaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="viewer.html">Image Viewer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="viewer.html#creating-a-new-viewer">Creating a new Viewer</a></li>
<li class="toctree-l2"><a class="reference internal" href="viewer.html#image-viewer-controls">Image Viewer Controls</a></li>
<li class="toctree-l2"><a class="reference internal" href="viewer.html#saving-a-viewer-tile">Saving a Viewer Tile</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="highcharts.html">Highcharts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="highcharts.html#creating-a-new-chart">Creating a New Chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="highcharts.html#adding-series-to-a-chart">Adding Series to a Chart</a></li>
<li class="toctree-l2"><a class="reference internal" href="highcharts.html#modifying-a-charts-properties">Modifying a Charts Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="highcharts.html#selecting-points-and-zooming-in">Selecting Points and Zooming in</a></li>
<li class="toctree-l2"><a class="reference internal" href="highcharts.html#removing-points">Removing Points</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="custom_toyz.html">Creating Custom Toyz</a><ul>
<li class="toctree-l2"><a class="reference internal" href="custom_toyz.html#creating-and-installing-your-first-toy">Creating and Installing Your First Toy</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_toyz.html#making-it-your-own">Making it Your Own</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="toyz_api.html">Toyz API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="toyz_api.html#toyz-core-js">toyz_core.js</a></li>
<li class="toctree-l2"><a class="reference internal" href="toyz_api.html#job-api">Job API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="web_gui.html">Toyz Web GUI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="web_gui.html#parameters">Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_gui.html#properties-for-all-parameters">Properties for all Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_gui.html#container-parameters">Container Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_gui.html#input-parameters">Input Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="web_gui.html#input">input</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to Toyz</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Toyz</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>toyz.utils package</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/toyz.utils.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="toyz-utils-package">
<h1>toyz.utils package<a class="headerlink" href="#toyz-utils-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="toyz.utils.db_interfaces.html">toyz.utils.db_interfaces package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="toyz.utils.db_interfaces.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="toyz.utils.db_interfaces.html#module-toyz.utils.db_interfaces.sqlite_interface">toyz.utils.db_interfaces.sqlite_interface module</a></li>
<li class="toctree-l2"><a class="reference internal" href="toyz.utils.db_interfaces.html#module-toyz.utils.db_interfaces">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-toyz.utils.core">
<span id="toyz-utils-core-module"></span><h2>toyz.utils.core module<a class="headerlink" href="#module-toyz.utils.core" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="toyz.utils.core.Toy">
<em class="property">class </em><tt class="descclassname">toyz.utils.core.</tt><tt class="descname">Toy</tt><big>(</big><em>toy</em>, <em>module=None</em>, <em>path=None</em>, <em>config=None</em>, <em>key=None</em><big>)</big><a class="headerlink" href="#toyz.utils.core.Toy" title="Permalink to this definition">¶</a></dt>
<dd><p>A toy built on the toyz framework.</p>
<p><em>This class has not yet been setup</em></p>
<dl class="method">
<dt id="toyz.utils.core.Toy.reload">
<tt class="descname">reload</tt><big>(</big><em>module</em><big>)</big><a class="headerlink" href="#toyz.utils.core.Toy.reload" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="toyz.utils.core.ToyzClass">
<em class="property">class </em><tt class="descclassname">toyz.utils.core.</tt><tt class="descname">ToyzClass</tt><big>(</big><em>dict_in</em><big>)</big><a class="headerlink" href="#toyz.utils.core.ToyzClass" title="Permalink to this definition">¶</a></dt>
<dd><p>I often prefer to work with classes rather than dictionaries. To allow
these objects to be pickled they must be defined as a class, so this is 
simply a class that converts a dictionary into a class.</p>
</dd></dl>

<dl class="class">
<dt id="toyz.utils.core.ToyzJobQueue">
<em class="property">class </em><tt class="descclassname">toyz.utils.core.</tt><tt class="descname">ToyzJobQueue</tt><big>(</big><em>queue_name</em>, <em>process_count</em><big>)</big><a class="headerlink" href="#toyz.utils.core.ToyzJobQueue" title="Permalink to this definition">¶</a></dt>
<dd><p>An environment for a single user to run tasks.</p>
<p><em>No longer implemented, but may be in the future</em></p>
<dl class="method">
<dt id="toyz.utils.core.ToyzJobQueue.add_job">
<tt class="descname">add_job</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#toyz.utils.core.ToyzJobQueue.add_job" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="toyz.utils.core.ToyzJobQueue.close_env">
<tt class="descname">close_env</tt><big>(</big><em>interrupt_jobs=False</em><big>)</big><a class="headerlink" href="#toyz.utils.core.ToyzJobQueue.close_env" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="toyz.utils.core.ToyzJobQueue.initialize">
<tt class="descname">initialize</tt><big>(</big><big>)</big><a class="headerlink" href="#toyz.utils.core.ToyzJobQueue.initialize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="toyz.utils.core.ToyzJobQueue.job_worker">
<tt class="descname">job_worker</tt><big>(</big><em>queue</em><big>)</big><a class="headerlink" href="#toyz.utils.core.ToyzJobQueue.job_worker" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="toyz.utils.core.ToyzSettings">
<em class="property">class </em><tt class="descclassname">toyz.utils.core.</tt><tt class="descname">ToyzSettings</tt><big>(</big><em>config_root_path=None</em><big>)</big><a class="headerlink" href="#toyz.utils.core.ToyzSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Settings for the current toyz application.</p>
<dl class="method">
<dt id="toyz.utils.core.ToyzSettings.first_time_setup">
<tt class="descname">first_time_setup</tt><big>(</big><em>config_root_path</em><big>)</big><a class="headerlink" href="#toyz.utils.core.ToyzSettings.first_time_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Initial setup of the Toyz application and creation of files the first time it&#8217;s run.</p>
<dl class="docutils">
<dt>Parameters</dt>
<dd><ul class="first last simple">
<li>config_root_path (<em>string</em> ): Default root path of the new Toyz instance</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="toyz.utils.core.ToyzSettings.load_settings">
<tt class="descname">load_settings</tt><big>(</big><em>config_path</em>, <em>security_key=None</em><big>)</big><a class="headerlink" href="#toyz.utils.core.ToyzSettings.load_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Load settings. If <tt class="docutils literal"><span class="pre">toyz_settings.security.encrypt_config</span></tt> is <em>True</em>, 
the settings file will be decrypted (this requires a securiity key).</p>
<p><em>Security not yet implemented</em></p>
</dd></dl>

<dl class="method">
<dt id="toyz.utils.core.ToyzSettings.save_settings">
<tt class="descname">save_settings</tt><big>(</big><em>security_key=None</em><big>)</big><a class="headerlink" href="#toyz.utils.core.ToyzSettings.save_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the toyz settings to disk. If toyz_settings.security.encrypt_config is <em>True</em>, 
the settings file will be encrypted (this requires a security key).</p>
<p><em>Security not yet implemented</em></p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.check4keys">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">check4keys</tt><big>(</big><em>myDict</em>, <em>keys</em><big>)</big><a class="headerlink" href="#toyz.utils.core.check4keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks a dictionary for a set of required keys.</p>
<dl class="docutils">
<dt>Parameters</dt>
<dd><ul class="first last simple">
<li>myDict (<em>dict</em> ): Dictionary to be searched</li>
<li>keys (<em>list</em> ): List of keys to search for in the dictionary</li>
</ul>
</dd>
<dt>Raises</dt>
<dd>Raises a <a class="reference internal" href="#toyz.utils.errors.ToyzJobError" title="toyz.utils.errors.ToyzJobError"><tt class="xref py py-class docutils literal"><span class="pre">toyz.utils.errors.ToyzJobError</span></tt></a> if any keys are missing from 
<tt class="docutils literal"><span class="pre">myDict</span></tt> and lists all of the missing keys</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.check_instance">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">check_instance</tt><big>(</big><em>obj</em>, <em>instances</em><big>)</big><a class="headerlink" href="#toyz.utils.core.check_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if an object is an instance of another object</p>
<dl class="docutils">
<dt>Parameters</dt>
<dd><ul class="first last simple">
<li>obj (<em>object</em> ): Object to check</li>
<li>instances (<em>list</em> ): List of objects to crosscheck with obj</li>
</ul>
</dd>
<dt>Returns</dt>
<dd><ul class="first last simple">
<li>is_instance (<em>bool</em> ): <em>True</em> if the obj is an instances of one of the objects in 
the list, <em>False</em> otherwise</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.check_pwd">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">check_pwd</tt><big>(</big><em>toyz_settings</em>, <em>user_id</em>, <em>pwd</em><big>)</big><a class="headerlink" href="#toyz.utils.core.check_pwd" title="Permalink to this definition">¶</a></dt>
<dd><p>Check to see if a users password matches the one stored in the database.</p>
<dl class="docutils">
<dt>Parameters</dt>
<dd><ul class="first last simple">
<li>toyz_settings ( <a class="reference internal" href="#toyz.utils.core.ToyzSettings" title="toyz.utils.core.ToyzSettings"><tt class="xref py py-class docutils literal"><span class="pre">toyz.utils.core.ToyzSettings</span></tt></a> ): Settings for the current 
application</li>
<li>user_id (<em>string</em> ): Id of the user logging in</li>
<li>pwd: (<em>string</em> ): password the user has entered</li>
</ul>
</dd>
<dt>Returns</dt>
<dd><ul class="first last simple">
<li>valid_login (<em>bool</em> ): True if the user name and password match</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.check_user_modules">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">check_user_modules</tt><big>(</big><em>toyz_settings</em>, <em>user_id</em>, <em>module</em><big>)</big><a class="headerlink" href="#toyz.utils.core.check_user_modules" title="Permalink to this definition">¶</a></dt>
<dd><p>Check to see if a module is available for the user</p>
<dl class="docutils">
<dt>Parameters</dt>
<dd><dl class="first docutils">
<dt>toyz_settings ( <a class="reference internal" href="#toyz.utils.core.ToyzSettings" title="toyz.utils.core.ToyzSettings"><tt class="xref py py-class docutils literal"><span class="pre">toyz.utils.core.ToyzSettings</span></tt></a> ):</dt>
<dd><ul class="first last simple">
<li>Settings for the application runnning the job (may be needed to load user info 
or check permissions)</li>
</ul>
</dd>
</dl>
<p class="last">user_id ( <em>string</em> ): id of the current user
module ( <em>string</em> ): name of the module to search for</p>
</dd>
<dt>Returns</dt>
<dd><dl class="first last docutils">
<dt>module_present ( <em>bool</em> ): </dt>
<dd><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">true</span></tt> if the user has access to the module, <tt class="docutils literal"><span class="pre">false</span></tt>
otherwise</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.check_user_shortcuts">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">check_user_shortcuts</tt><big>(</big><em>toyz_settings</em>, <em>user_id</em>, <em>shortcuts=None</em><big>)</big><a class="headerlink" href="#toyz.utils.core.check_user_shortcuts" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that a user has all of the default shortcuts.</p>
<dl class="docutils">
<dt>Parameters</dt>
<dd><ul class="first last simple">
<li>toyz_settings ( <a class="reference internal" href="#toyz.utils.core.ToyzSettings" title="toyz.utils.core.ToyzSettings"><tt class="xref py py-class docutils literal"><span class="pre">toyz.utils.core.ToyzSettings</span></tt></a> ): Toyz Settings</li>
<li>user_id (<em>string</em> ): User id to check for shortcuts</li>
<li>shortcuts (<em>dict</em>, optional): Dictionary of shortcuts for a user. Shortcuts
are always of the form <tt class="docutils literal"><span class="pre">shortcut_name:path</span></tt> .</li>
</ul>
</dd>
<dt>Returns</dt>
<dd><ul class="first last simple">
<li>shortcuts: dictionary of shortcuts for the user</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.check_version">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">check_version</tt><big>(</big><em>db_settings</em><big>)</big><a class="headerlink" href="#toyz.utils.core.check_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Since version changes may update the API or the database, check that the current version
is compatible with the users configuration and database</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.create_paths">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">create_paths</tt><big>(</big><em>paths</em><big>)</big><a class="headerlink" href="#toyz.utils.core.create_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for paths on the server. If a path does not exist, create the necessary directories.
For example, if <tt class="docutils literal"><span class="pre">paths=['~/Documents/images/2014-6-5_data/']</span></tt> and only the path 
<em>&#8216;~/Documents&#8217;</em> exists, both <em>&#8216;~/Documents/images/&#8217;</em> and 
<em>&#8216;~/Documents/images/2014-6-5_data/&#8217;</em> are created.</p>
<dl class="docutils">
<dt>Parameters</dt>
<dd>paths (<em>string</em> or <em>list</em> of strings): If paths is a string, this is the path to 
search for and create. If paths is a list, each one is a path to search for and create</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.encrypt_pwd">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">encrypt_pwd</tt><big>(</big><em>toyz_settings</em>, <em>pwd</em><big>)</big><a class="headerlink" href="#toyz.utils.core.encrypt_pwd" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the passlib module to create a hash for the given password.</p>
<dl class="docutils">
<dt>Parameters</dt>
<dd><ul class="first last simple">
<li>toyz_settings ( <a class="reference internal" href="#toyz.utils.core.ToyzSettings" title="toyz.utils.core.ToyzSettings"><tt class="xref py py-class docutils literal"><span class="pre">toyz.utils.core.ToyzSettings</span></tt></a> ): Settings for the 
current application</li>
<li>pwd (<em>string</em> ): password the user has entered</li>
</ul>
</dd>
<dt>Returns</dt>
<dd><ul class="first last simple">
<li>pwd_hash (<em>string</em> ): Password hash to be stored for the given password. If passwords
are not encrypted, this will just return the <tt class="docutils literal"><span class="pre">pwd</span></tt> passed to the function.</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.get_all_user_modules">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">get_all_user_modules</tt><big>(</big><em>toyz_settings</em>, <em>user_id</em><big>)</big><a class="headerlink" href="#toyz.utils.core.get_all_user_modules" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all modules available for the user.</p>
<dl class="docutils">
<dt>Parameters</dt>
<dd><dl class="first docutils">
<dt>toyz_settings ( <a class="reference internal" href="#toyz.utils.core.ToyzSettings" title="toyz.utils.core.ToyzSettings"><tt class="xref py py-class docutils literal"><span class="pre">toyz.utils.core.ToyzSettings</span></tt></a> ):</dt>
<dd><ul class="first last simple">
<li>Settings for the application runnning the job (may be needed to load user info 
or check permissions)</li>
</ul>
</dd>
</dl>
<p class="last">user_id ( <em>string</em> ): id of the current user</p>
</dd>
<dt>Returns</dt>
<dd><dl class="first last docutils">
<dt>user_modules ( <em>list</em> of <em>strings</em> ): </dt>
<dd><ul class="first last simple">
<li>list of all toyz modules that the user has access
to, including permissions granted by member groups</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.get_all_user_toyz">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">get_all_user_toyz</tt><big>(</big><em>toyz_settings</em>, <em>user_id</em><big>)</big><a class="headerlink" href="#toyz.utils.core.get_all_user_toyz" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all available Toyz paths for the current user</p>
<dl class="docutils">
<dt>Parameters</dt>
<dd><dl class="first docutils">
<dt>toyz_settings ( <a class="reference internal" href="#toyz.utils.core.ToyzSettings" title="toyz.utils.core.ToyzSettings"><tt class="xref py py-class docutils literal"><span class="pre">toyz.utils.core.ToyzSettings</span></tt></a> ):</dt>
<dd><ul class="first last simple">
<li>Settings for the application runnning the job (may be needed to load user info 
or check permissions)</li>
</ul>
</dd>
</dl>
<p class="last">user_id ( <em>string</em> ): id of the current user</p>
</dd>
<dt>Returns</dt>
<dd><dl class="first last docutils">
<dt>user_toyz ( <em>dict</em> ):</dt>
<dd><ul class="first last simple">
<li>All of the local python directories that the user can use to run
jobs.</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.get_bool">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">get_bool</tt><big>(</big><em>prompt</em><big>)</big><a class="headerlink" href="#toyz.utils.core.get_bool" title="Permalink to this definition">¶</a></dt>
<dd><p>Prompt a user for a boolean expression and repeat until a valid boolean
has been entered. <tt class="docutils literal"><span class="pre">prompt</span></tt> is the text to prompt the user with.</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.get_module_info">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">get_module_info</tt><big>(</big><em>toyz_settings</em>, <em>tid</em>, <em>params</em><big>)</big><a class="headerlink" href="#toyz.utils.core.get_module_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get information about modules accessible by the current user</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.get_toyz_module">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">get_toyz_module</tt><big>(</big><em>toyz_settings</em>, <em>user_id</em>, <em>module</em><big>)</big><a class="headerlink" href="#toyz.utils.core.get_toyz_module" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a toyz module from either installed modules or one in a users toyz paths.
An uninstalled toy will take precedence if it is in the toy paths as opposed to installed
modules.</p>
<dl class="docutils">
<dt>Parameters</dt>
<dd><dl class="first docutils">
<dt>toyz_settings ( <a class="reference internal" href="#toyz.utils.core.ToyzSettings" title="toyz.utils.core.ToyzSettings"><tt class="xref py py-class docutils literal"><span class="pre">toyz.utils.core.ToyzSettings</span></tt></a> ):</dt>
<dd><ul class="first last simple">
<li>Settings for the application runnning the job (may be needed to load user info 
or check permissions)</li>
</ul>
</dd>
</dl>
<p class="last">user_id ( <em>string</em> ): id of the current user
module ( <em>string</em> ): name of the module to search for</p>
</dd>
<dt>Returns</dt>
<dd>toyz_module ( <em>module</em> ): python module if it exists, otherwise <tt class="docutils literal"><span class="pre">None</span></tt>.</dd>
<dt>Raises</dt>
<dd>Raises a <a class="reference internal" href="#toyz.utils.errors.ToyzJobError" title="toyz.utils.errors.ToyzJobError"><tt class="xref py py-class docutils literal"><span class="pre">toyz.utils.errors.ToyzJobError</span></tt></a> if the module is not found
in the users approved modules</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.get_user_toyz">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">get_user_toyz</tt><big>(</big><em>toyz_settings</em>, <em>user_id</em>, <em>toy</em><big>)</big><a class="headerlink" href="#toyz.utils.core.get_user_toyz" title="Permalink to this definition">¶</a></dt>
<dd><p>If a toy is contained in a users toyz paths, get the module and return it</p>
<dl class="docutils">
<dt>Parameters</dt>
<dd><dl class="first docutils">
<dt>toyz_settings ( <a class="reference internal" href="#toyz.utils.core.ToyzSettings" title="toyz.utils.core.ToyzSettings"><tt class="xref py py-class docutils literal"><span class="pre">toyz.utils.core.ToyzSettings</span></tt></a> ):</dt>
<dd><ul class="first last simple">
<li>Settings for the application runnning the job (may be needed to load user info 
or check permissions)</li>
</ul>
</dd>
</dl>
<p class="last">user_id ( <em>string</em> ): id of the current user
toy ( <em>string</em> ): name of the toy to search for</p>
</dd>
<dt>Returns</dt>
<dd>toy ( <em>module</em> ): python module if it exists, otherwise <tt class="docutils literal"><span class="pre">None</span></tt>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.get_user_type">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">get_user_type</tt><big>(</big><em>params</em><big>)</big><a class="headerlink" href="#toyz.utils.core.get_user_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Since user properties and group properties are kept in the same table and use the same
functions, many functions use the keyword <cite>user_id</cite> or <cite>group_id</cite> to figure out if
they are operating on groups or users.</p>
<dl class="docutils">
<dt>Parameters</dt>
<dd><ul class="first last simple">
<li>params (<em>dict</em> ): Dictionary of parameters sent to a function</li>
</ul>
</dd>
<dt>Returns</dt>
<dd><ul class="first last simple">
<li>user (<em>dict</em> ): Dictionary with user_type. This is always either 
<tt class="docutils literal"><span class="pre">{user_id:</span> <span class="pre">params['user_id']}</span></tt> or <tt class="docutils literal"><span class="pre">{group_id:</span> <span class="pre">params['group_id']}</span></tt></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.get_workspace_permissions">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">get_workspace_permissions</tt><big>(</big><em>toyz_settings</em>, <em>tid</em>, <em>params</em><big>)</big><a class="headerlink" href="#toyz.utils.core.get_workspace_permissions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="toyz.utils.core.is_int">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">is_int</tt><big>(</big><em>str_in</em><big>)</big><a class="headerlink" href="#toyz.utils.core.is_int" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether or not a string is an integer.</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.is_number">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">is_number</tt><big>(</big><em>str_in</em><big>)</big><a class="headerlink" href="#toyz.utils.core.is_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether or not a string is a number</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.merge_dict">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">merge_dict</tt><big>(</big><em>d1</em>, <em>d2</em>, <em>copy=False</em>, <em>keys=[]</em><big>)</big><a class="headerlink" href="#toyz.utils.core.merge_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Python version of jQuery.extend that recursively merges two python
dictionaries. If <tt class="docutils literal"><span class="pre">copy</span></tt> is <tt class="docutils literal"><span class="pre">True</span></tt> then the new object is a copy, otherwise
d2 is merged into d1 (the same as $.extend). <tt class="docutils literal"><span class="pre">keys</span></tt> should never be passed
on the first call as it is used to keep track of which elements have been
used (to avoid infinite loops).</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.normalize_path">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">normalize_path</tt><big>(</big><em>path</em><big>)</big><a class="headerlink" href="#toyz.utils.core.normalize_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Format a path with bash symbols like &#8216;<strong>~</strong>&#8216; , &#8216;<strong>.</strong>&#8216; , &#8216;<strong>..</strong>&#8216; into a full absolute path.
This simply returns <tt class="docutils literal"><span class="pre">os.path.abspath(os.path.expanduser(path))</span></tt> .</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.progress_log">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">progress_log</tt><big>(</big><em>msg</em><big>)</big><a class="headerlink" href="#toyz.utils.core.progress_log" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a notification to the client to update on the progress of a job</p>
<dl class="docutils">
<dt>Parameters</dt>
<dd><ul class="first last simple">
<li>msg ( <em>string</em> ): message to send to client</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.run_job">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">run_job</tt><big>(</big><em>toyz_settings</em>, <em>pipe</em>, <em>job</em><big>)</big><a class="headerlink" href="#toyz.utils.core.run_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads modules and runs a job (function) sent from a client. Any errors will be trapped 
and flagged as a <a class="reference internal" href="#toyz.utils.errors.ToyzError" title="toyz.utils.errors.ToyzError"><tt class="xref py py-class docutils literal"><span class="pre">toyz.utils.errors.ToyzError</span></tt></a> and sent back to the client who 
initiated the job.</p>
<p>All job functions will take exactly 3 parameters: <strong>toyz_settings</strong>, <strong>tid</strong>, <strong>params</strong>. 
The <strong>tid</strong> is the task id (<em>user</em>, <em>session</em>, and <em>request_id</em> ) information (see below), 
and <strong>params</strong> is a dictionary of parameters sent by the client.</p>
<p>Each job is run as a new process, so any modules imported should be removed from memory 
when the job has completed.</p>
<dl class="docutils">
<dt>Parameters</dt>
<dd><dl class="first last docutils">
<dt>toyz_settings ( <a class="reference internal" href="#toyz.utils.core.ToyzSettings" title="toyz.utils.core.ToyzSettings"><tt class="xref py py-class docutils literal"><span class="pre">toyz.utils.core.ToyzSettings</span></tt></a> ):</dt>
<dd><ul class="first last simple">
<li>Settings for the application runnning the job (may be needed to load user info 
or check permissions)</li>
</ul>
</dd>
<dt>pipe: <em>multiprocessing.Pipe</em></dt>
<dd><ul class="first last simple">
<li>Communication with the parent process.</li>
<li>It may be useful to pass progress notifications to a client as a job
is run. To send a notifaction the pipe requires a dictionary that is of the
same form as the result (see Returns below), but usually with 
<tt class="docutils literal"><span class="pre">id='notification'</span></tt>.</li>
</ul>
</dd>
<dt>job: <em>dict</em></dt>
<dd><ul class="first last simple">
<li>The job received from the user. Each job will contain the following keys:</li>
<li><tt class="docutils literal"><span class="pre">id</span></tt> (<em>dict</em>): Unique values for the given job. These are the
<strong>user_id</strong>, the id of the user loaded from a secure cookie; the
<strong>session_id</strong>, a unique identifier for the websocket; and the
<strong>request_id</strong>, a unique identifier for the current request, sent from the client</li>
<li><tt class="docutils literal"><span class="pre">module</span></tt> (<em>str</em>): Name of the Python module that contains the function called 
by the client. In order for a module to work for a user, he/she must either have
permissions set to view the module or belong to a group with permissions set
to view the module (including <em>all_users</em>).</li>
<li><tt class="docutils literal"><span class="pre">task</span></tt> (<em>str</em>): Name of the function called by the client</li>
<li><tt class="docutils literal"><span class="pre">parameters</span></tt> (<em>dict</em>): Required and optional parameters passed to the function.</li>
</ul>
</dd>
</dl>
</dd>
<dt>Returns</dt>
<dd><dl class="first last docutils">
<dt>result: <em>dict</em></dt>
<dd><ul class="first last simple">
<li>The result is returned to the application running the job and is composed
of two keys: an <tt class="docutils literal"><span class="pre">id</span></tt>: the job id for the completed job, and a <tt class="docutils literal"><span class="pre">response</span></tt>
that is sent to the client.</li>
<li>The response is either an empty dictionary or one that contains (at a minimum) 
the key <strong>id</strong>, which is used by the client to identify the type of response it is 
receiving. Including the key <strong>request_completed</strong> with a <em>True</em> value tells the
client that the current request has finished and may be removed from the queue.</li>
</ul>
</dd>
</dl>
</dd>
</dl>
<p>Example</p>
<blockquote>
<div><p>A client might send the following job to the server:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">job</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">id</span> <span class="o">:</span> <span class="p">{</span>
        <span class="nx">user_id</span> <span class="o">:</span> <span class="s1">&#39;Iggy&#39;</span><span class="p">,</span>
        <span class="nx">session_id</span> <span class="o">:</span> <span class="s1">&#39;12&#39;</span><span class="p">,</span>
        <span class="nx">request_id</span> <span class="o">:</span> <span class="mi">305</span>
    <span class="p">},</span>
    <span class="nx">module</span> <span class="o">:</span> <span class="s1">&#39;toyz.web.tasks&#39;</span><span class="p">,</span>
    <span class="nx">task</span> <span class="o">:</span> <span class="s1">&#39;load_directory&#39;</span><span class="p">,</span>
    <span class="nx">parameters</span> <span class="o">:</span> <span class="p">{</span>
        <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;~/images&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this case, after receiving the job, this function will import 
the <a class="reference internal" href="toyz.web.html#module-toyz.web.tasks" title="toyz.web.tasks"><tt class="xref py py-mod docutils literal"><span class="pre">toyz.web.tasks</span></tt></a> module 
(if it has not been imported already) and run the function 
<tt class="docutils literal"><span class="pre">load_directory(toyz_settings,</span> <span class="pre">job['id'],job['parameters'])</span></tt>. 
If there are any errors in loading the directory, a response of the form</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">response</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;id&#39;</span> <span class="p">:</span> <span class="s">&#39;ERROR&#39;</span><span class="p">,</span>
    <span class="s">&#39;error&#39;</span> <span class="p">:</span> <span class="s">&#39;Error message here for unable to lead directory&#39;</span><span class="p">,</span>
    <span class="s">&#39;traceback&#39;</span> <span class="p">:</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exec</span><span class="p">()</span>
<span class="p">}</span>
</pre></div>
</div>
<p>is sent. If the directory is loaded correctly a response of the form</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">response</span><span class="o">=</span><span class="p">{</span>
    <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;directory&#39;</span><span class="p">,</span>
    <span class="s">&#39;path&#39;</span><span class="p">:</span> <span class="s">&#39;~/images/proj1&#39;</span><span class="p">,</span>
    <span class="s">&#39;shortcuts&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;user&#39;</span><span class="p">,</span> <span class="s">&#39;temp&#39;</span><span class="p">,</span> <span class="s">&#39;home&#39;</span><span class="p">],</span>
    <span class="s">&#39;folders&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;proj1&#39;</span><span class="p">,</span> <span class="s">&#39;proj2&#39;</span><span class="p">],</span>
    <span class="s">&#39;files&#39;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s">&#39;parent&#39;</span><span class="p">:</span> <span class="s">&#39;~/images&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>is sent to the client.</p>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.core.str_2_bool">
<tt class="descclassname">toyz.utils.core.</tt><tt class="descname">str_2_bool</tt><big>(</big><em>bool_str</em><big>)</big><a class="headerlink" href="#toyz.utils.core.str_2_bool" title="Permalink to this definition">¶</a></dt>
<dd><p>Case independent function to convert a string representation of a 
boolean (<tt class="docutils literal"><span class="pre">'true'</span></tt>/<tt class="docutils literal"><span class="pre">'false'</span></tt>, <tt class="docutils literal"><span class="pre">'yes'</span></tt>/<tt class="docutils literal"><span class="pre">'no'</span></tt>) into a <tt class="docutils literal"><span class="pre">bool</span></tt>. This is case 
insensitive, and will also accept part of a boolean string 
(<tt class="docutils literal"><span class="pre">'t'</span></tt>/<tt class="docutils literal"><span class="pre">'f'</span></tt>, <tt class="docutils literal"><span class="pre">'y'</span></tt>/<tt class="docutils literal"><span class="pre">'n'</span></tt>).</p>
<p>Raises a <a class="reference internal" href="#toyz.utils.errors.ToyzError" title="toyz.utils.errors.ToyzError"><tt class="xref py py-class docutils literal"><span class="pre">toyz.utils.errors.ToyzError</span></tt></a> if an invalid expression is entered.</p>
</dd></dl>

</div>
<div class="section" id="module-toyz.utils.db">
<span id="toyz-utils-db-module"></span><h2>toyz.utils.db module<a class="headerlink" href="#module-toyz.utils.db" title="Permalink to this headline">¶</a></h2>
<p>To keep Toyz database agnostic this module works as a stardard API to access 
any database interfaces written into the framework. Currently on the <tt class="docutils literal"><span class="pre">sqlite</span></tt>
interface is supported.</p>
<dl class="function">
<dt id="toyz.utils.db.check_chars">
<tt class="descclassname">toyz.utils.db.</tt><tt class="descname">check_chars</tt><big>(</big><em>err_flag</em>, <em>*lists</em><big>)</big><a class="headerlink" href="#toyz.utils.db.check_chars" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if every value in every list is alpha-numeric.</p>
<dl class="docutils">
<dt>Parameters</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>err_flag (<em>bool</em> ): </dt>
<dd><ul class="first last simple">
<li>If err_flag is True, an exception will be raised if the field is not alpha_numeric.</li>
<li>If err_flag is False, the function will return False</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>lists (<em>lists</em>): </dt>
<dd><ul class="first last simple">
<li>Each list in lists must be a list of strings, each one a 
keyword to verify if it is alpha-numeric</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.db.create_toyz_database">
<tt class="descclassname">toyz.utils.db.</tt><tt class="descname">create_toyz_database</tt><big>(</big><em>db_settings</em><big>)</big><a class="headerlink" href="#toyz.utils.db.create_toyz_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new Toyz database. This should only be done when creating a new
instance of a Toyz application.</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.db.db_func">
<tt class="descclassname">toyz.utils.db.</tt><tt class="descname">db_func</tt><big>(</big><em>db_settings</em>, <em>func</em>, <em>**params</em><big>)</big><a class="headerlink" href="#toyz.utils.db.db_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Function from a database outside of the database API.</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.db.delete_param">
<tt class="descclassname">toyz.utils.db.</tt><tt class="descname">delete_param</tt><big>(</big><em>db_settings</em>, <em>param_type</em>, <em>**params</em><big>)</big><a class="headerlink" href="#toyz.utils.db.delete_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a parameter from the database.</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.db.delete_workspace">
<tt class="descclassname">toyz.utils.db.</tt><tt class="descname">delete_workspace</tt><big>(</big><em>db_settings</em>, <em>user_id</em>, <em>work_id</em><big>)</big><a class="headerlink" href="#toyz.utils.db.delete_workspace" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a workspace</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.db.get_all_ids">
<tt class="descclassname">toyz.utils.db.</tt><tt class="descname">get_all_ids</tt><big>(</big><em>db_settings</em>, <em>user_type</em><big>)</big><a class="headerlink" href="#toyz.utils.db.get_all_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all user_id&#8217;s or group_id&#8217;s in the database.</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.db.get_db_info">
<tt class="descclassname">toyz.utils.db.</tt><tt class="descname">get_db_info</tt><big>(</big><em>db_settings</em><big>)</big><a class="headerlink" href="#toyz.utils.db.get_db_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the info for the database, including the version it was created with,
updates made, and the latest version of toyz it was configured for</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.db.get_param">
<tt class="descclassname">toyz.utils.db.</tt><tt class="descname">get_param</tt><big>(</big><em>db_settings</em>, <em>param_type</em>, <em>**params</em><big>)</big><a class="headerlink" href="#toyz.utils.db.get_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a parameter from the database. This may be either a single value,
dictionary, or list of values, depending on the parameter.</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.db.get_path_info">
<tt class="descclassname">toyz.utils.db.</tt><tt class="descname">get_path_info</tt><big>(</big><em>db_settings</em>, <em>path</em><big>)</big><a class="headerlink" href="#toyz.utils.db.get_path_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the permissions for all users and groups for a given path.</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.db.get_table_names">
<tt class="descclassname">toyz.utils.db.</tt><tt class="descname">get_table_names</tt><big>(</big><em>db_settings</em><big>)</big><a class="headerlink" href="#toyz.utils.db.get_table_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the names of tables in the database (this can be useful when the user has
changed versions)</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.db.get_workspace_sharing">
<tt class="descclassname">toyz.utils.db.</tt><tt class="descname">get_workspace_sharing</tt><big>(</big><em>db_settings</em>, <em>**params</em><big>)</big><a class="headerlink" href="#toyz.utils.db.get_workspace_sharing" title="Permalink to this definition">¶</a></dt>
<dd><p>Get sharing permissions for a users workspaces</p>
</dd></dl>

<dl class="data">
<dt id="toyz.utils.db.group_fields">
<tt class="descclassname">toyz.utils.db.</tt><tt class="descname">group_fields</tt><em class="property"> = ['pwd', 'users', 'paths', 'modules', 'toyz', 'workspaces']</em><a class="headerlink" href="#toyz.utils.db.group_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>toyz.utils.db.param_formats is a dictionary that sets a standard for getting and updating
rows in the toyz database. Each param format has the following keys:</p>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>tbl ( <em>string</em> ):</dt>
<dd><ul class="first last simple">
<li>Name of the table</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>required ( <em>string</em> ):</dt>
<dd><ul class="first last simple">
<li>Required parameters to get a row (or rows) from the table</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>get ( <em>string</em> or <em>list</em> ):</dt>
<dd><ul class="first last simple">
<li>When a user calls a <tt class="docutils literal"><span class="pre">get_param</span></tt> command, the <tt class="docutils literal"><span class="pre">get</span></tt> columns (along with the
<tt class="docutils literal"><span class="pre">required</span></tt> columns) are loaded from the table</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>format ( <em>string</em> ):</dt>
<dd><ul class="first last simple">
<li>The type of object to be added to the table. This can be <tt class="docutils literal"><span class="pre">single</span></tt>, <tt class="docutils literal"><span class="pre">dict</span></tt>, or
<tt class="docutils literal"><span class="pre">list</span></tt>.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>update ( <em>string</em> ):</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Name of key to use when updating the table (see below for different formats)</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">single</span></tt>:</dt>
<dd><ul class="first last simple">
<li>Only a single value can be store/retrieved</li>
<li><tt class="docutils literal"><span class="pre">update</span></tt> is just the same as the <tt class="docutils literal"><span class="pre">get</span></tt> column name</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">list</span></tt>:</dt>
<dd><ul class="first last simple">
<li>A list of values can be stored or retrieved, but the table only has a
single non-required column</li>
<li><tt class="docutils literal"><span class="pre">update</span></tt> is the variable name of the list that needs to be
added to the table</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">dict</span></tt>:</dt>
<dd><ul class="first last simple">
<li>A dictionary is stored in the table</li>
<li><tt class="docutils literal"><span class="pre">get</span></tt> is a list where the first variable is the key of the dictionary
and the second is the value</li>
<li><tt class="docutils literal"><span class="pre">update</span></tt> is the variable name of the dictionary that is being added
to the table</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">rows</span></tt>:</dt>
<dd><ul class="first last simple">
<li>Some tables have multiple columns that may be stored/retrieved in different ways</li>
<li>Tables with <tt class="docutils literal"><span class="pre">format='rows'</span></tt> cannot make user of the get/update/delete_param
methods</li>
<li>The keywords of the dictionary are the columns of the table</li>
<li><tt class="docutils literal"><span class="pre">columns</span></tt> is a list of column names in the table</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>json ( <em>list</em>, optional):</dt>
<dd><ul class="first last simple">
<li>A list of any columns that need to be converted to/from a json string for
storage/retrieval</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.db.init">
<tt class="descclassname">toyz.utils.db.</tt><tt class="descname">init</tt><big>(</big><em>**params</em><big>)</big><a class="headerlink" href="#toyz.utils.db.init" title="Permalink to this definition">¶</a></dt>
<dd><p>For some databases it might be necessary to initialize them on startup, so this function
call <tt class="docutils literal"><span class="pre">init</span></tt> in the current database interface</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.db.update_all_params">
<tt class="descclassname">toyz.utils.db.</tt><tt class="descname">update_all_params</tt><big>(</big><em>db_settings</em>, <em>param_type</em>, <em>**params</em><big>)</big><a class="headerlink" href="#toyz.utils.db.update_all_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Update a parameter with a single value, a list of values, or a dictionary.
In the case of a list or a dictionary, this function also removes any entries
in the database not contained in <tt class="docutils literal"><span class="pre">params</span></tt> .</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.db.update_param">
<tt class="descclassname">toyz.utils.db.</tt><tt class="descname">update_param</tt><big>(</big><em>db_settings</em>, <em>param_type</em>, <em>**params</em><big>)</big><a class="headerlink" href="#toyz.utils.db.update_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Update a parameter with a single value, list of values, or dictionary.</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.db.update_version">
<tt class="descclassname">toyz.utils.db.</tt><tt class="descname">update_version</tt><big>(</big><em>db_settings</em>, <em>params</em><big>)</big><a class="headerlink" href="#toyz.utils.db.update_version" title="Permalink to this definition">¶</a></dt>
<dd><p>It may be necessary to update a database when the Toyz version changes. This function
will be unique to each DB and describe how to implement a given version change</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.db.update_workspace">
<tt class="descclassname">toyz.utils.db.</tt><tt class="descname">update_workspace</tt><big>(</big><em>db_settings</em>, <em>user_id</em>, <em>work_id</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#toyz.utils.db.update_workspace" title="Permalink to this definition">¶</a></dt>
<dd><p>Update sharing for a workspace</p>
</dd></dl>

</div>
<div class="section" id="module-toyz.utils.errors">
<span id="toyz-utils-errors-module"></span><h2>toyz.utils.errors module<a class="headerlink" href="#module-toyz.utils.errors" title="Permalink to this headline">¶</a></h2>
<p>Error classes used in Toyz.</p>
<dl class="exception">
<dt id="toyz.utils.errors.Error">
<em class="property">exception </em><tt class="descclassname">toyz.utils.errors.</tt><tt class="descname">Error</tt><a class="headerlink" href="#toyz.utils.errors.Error" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/exceptions.html#exceptions.Exception" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></tt></a></p>
<p>Base class for custom errors related to the running of Toyz</p>
</dd></dl>

<dl class="exception">
<dt id="toyz.utils.errors.ToyzDataError">
<em class="property">exception </em><tt class="descclassname">toyz.utils.errors.</tt><tt class="descname">ToyzDataError</tt><big>(</big><em>msg</em><big>)</big><a class="headerlink" href="#toyz.utils.errors.ToyzDataError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#toyz.utils.errors.ToyzError" title="toyz.utils.errors.ToyzError"><tt class="xref py py-class docutils literal"><span class="pre">toyz.utils.errors.ToyzError</span></tt></a></p>
<p>Class for Toyz DataSource Errors</p>
</dd></dl>

<dl class="exception">
<dt id="toyz.utils.errors.ToyzDbError">
<em class="property">exception </em><tt class="descclassname">toyz.utils.errors.</tt><tt class="descname">ToyzDbError</tt><big>(</big><em>msg</em><big>)</big><a class="headerlink" href="#toyz.utils.errors.ToyzDbError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#toyz.utils.errors.ToyzError" title="toyz.utils.errors.ToyzError"><tt class="xref py py-class docutils literal"><span class="pre">toyz.utils.errors.ToyzError</span></tt></a></p>
<p>Class for errors initiating in the Toyz Database Interface</p>
</dd></dl>

<dl class="exception">
<dt id="toyz.utils.errors.ToyzError">
<em class="property">exception </em><tt class="descclassname">toyz.utils.errors.</tt><tt class="descname">ToyzError</tt><big>(</big><em>msg</em><big>)</big><a class="headerlink" href="#toyz.utils.errors.ToyzError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#toyz.utils.errors.Error" title="toyz.utils.errors.Error"><tt class="xref py py-class docutils literal"><span class="pre">toyz.utils.errors.Error</span></tt></a></p>
<p>Class for custom errors related to the running of Toyz.</p>
</dd></dl>

<dl class="exception">
<dt id="toyz.utils.errors.ToyzIoError">
<em class="property">exception </em><tt class="descclassname">toyz.utils.errors.</tt><tt class="descname">ToyzIoError</tt><big>(</big><em>msg</em><big>)</big><a class="headerlink" href="#toyz.utils.errors.ToyzIoError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#toyz.utils.errors.ToyzError" title="toyz.utils.errors.ToyzError"><tt class="xref py py-class docutils literal"><span class="pre">toyz.utils.errors.ToyzError</span></tt></a></p>
<p>Class for I/O Errors</p>
</dd></dl>

<dl class="exception">
<dt id="toyz.utils.errors.ToyzJobError">
<em class="property">exception </em><tt class="descclassname">toyz.utils.errors.</tt><tt class="descname">ToyzJobError</tt><big>(</big><em>msg</em><big>)</big><a class="headerlink" href="#toyz.utils.errors.ToyzJobError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#toyz.utils.errors.ToyzError" title="toyz.utils.errors.ToyzError"><tt class="xref py py-class docutils literal"><span class="pre">toyz.utils.errors.ToyzError</span></tt></a></p>
<p>Class for errors initiating in the Toyz Job Queue</p>
</dd></dl>

<dl class="class">
<dt id="toyz.utils.errors.ToyzWarning">
<em class="property">class </em><tt class="descclassname">toyz.utils.errors.</tt><tt class="descname">ToyzWarning</tt><big>(</big><em>msg</em><big>)</big><a class="headerlink" href="#toyz.utils.errors.ToyzWarning" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for warnings</p>
</dd></dl>

<dl class="exception">
<dt id="toyz.utils.errors.ToyzWebError">
<em class="property">exception </em><tt class="descclassname">toyz.utils.errors.</tt><tt class="descname">ToyzWebError</tt><big>(</big><em>msg</em><big>)</big><a class="headerlink" href="#toyz.utils.errors.ToyzWebError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#toyz.utils.errors.ToyzError" title="toyz.utils.errors.ToyzError"><tt class="xref py py-class docutils literal"><span class="pre">toyz.utils.errors.ToyzError</span></tt></a></p>
<p>Class for errors initiating in the Toyz Web Application</p>
</dd></dl>

</div>
<div class="section" id="module-toyz.utils.file_access">
<span id="toyz-utils-file-access-module"></span><h2>toyz.utils.file_access module<a class="headerlink" href="#module-toyz.utils.file_access" title="Permalink to this headline">¶</a></h2>
<p>Utilities to access path and file permissions for the server.</p>
<dl class="function">
<dt id="toyz.utils.file_access.get_all_parents">
<tt class="descclassname">toyz.utils.file_access.</tt><tt class="descname">get_all_parents</tt><big>(</big><em>path</em><big>)</big><a class="headerlink" href="#toyz.utils.file_access.get_all_parents" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a list with all of the parent directories of the file or path.</p>
<p>For example <tt class="docutils literal"><span class="pre">/Users/penny/Documents</span></tt> would be returned as
<tt class="docutils literal"><span class="pre">['/Users/penny/Documents',</span> <span class="pre">'/Users/penny',</span> <span class="pre">'/Users/']</span></tt></p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.file_access.get_file_permissions">
<tt class="descclassname">toyz.utils.file_access.</tt><tt class="descname">get_file_permissions</tt><big>(</big><em>db_settings</em>, <em>path</em>, <em>**user</em><big>)</big><a class="headerlink" href="#toyz.utils.file_access.get_file_permissions" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all of the permissions for a given path. Returns <strong>None</strong> type if no permissions have
been set.</p>
<dl class="docutils">
<dt>Parameters</dt>
<dd><ul class="first last simple">
<li>db_settings (<em>object</em> ): Database settings</li>
<li>path (<em>string</em> ): Path to check for permissions</li>
<li>user (<em>dict</em> ):  Key is either <strong>user_id</strong> or <strong>group_id</strong>, value is the <em>user_id</em> or 
<em>group_id</em></li>
</ul>
</dd>
<dt>Return</dt>
<dd><ul class="first last simple">
<li>permissions (<em>string</em> ): Permissions for the given user for the given path.
Returns <strong>None</strong> if no permissions have been set.</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.file_access.get_parent_permissions">
<tt class="descclassname">toyz.utils.file_access.</tt><tt class="descname">get_parent_permissions</tt><big>(</big><em>db_settings</em>, <em>path</em>, <em>**user</em><big>)</big><a class="headerlink" href="#toyz.utils.file_access.get_parent_permissions" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the permissions of the given path. If it doesn&#8217;t have any permissions
explicitely set, descend a tree and find the first parent directory with permissions set.
If no permissions can be found, <strong>None</strong> is returned.</p>
<dl class="docutils">
<dt>Parameters</dt>
<dd><ul class="first last simple">
<li>db_settings (<em>object</em> ): Database settings</li>
<li>path (<em>string</em> ): Path to check for permissions</li>
<li>user (<em>dict</em> ):  Key is either <strong>user_id</strong> or <strong>group_id</strong>, value is the <em>user_id</em> or 
<em>group_id</em></li>
</ul>
</dd>
<dt>Return</dt>
<dd><ul class="first last simple">
<li>permissions (<em>string</em> ): Permissions for the given user for the given path.
Returns <strong>None</strong> if no permissions have been set for any parent paths.</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.file_access.get_path_tree">
<tt class="descclassname">toyz.utils.file_access.</tt><tt class="descname">get_path_tree</tt><big>(</big><em>path</em><big>)</big><a class="headerlink" href="#toyz.utils.file_access.get_path_tree" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all of the sub directories of path.</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.file_access.split_path">
<tt class="descclassname">toyz.utils.file_access.</tt><tt class="descname">split_path</tt><big>(</big><em>path_in</em><big>)</big><a class="headerlink" href="#toyz.utils.file_access.split_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits a path into a list of its folders.</p>
<p>For example <tt class="docutils literal"><span class="pre">/Users/penny/Documents</span></tt> would
be returned as <tt class="docutils literal"><span class="pre">['Users',</span> <span class="pre">'penny',</span> <span class="pre">'Documents']</span></tt></p>
</dd></dl>

</div>
<div class="section" id="module-toyz.utils.security">
<span id="toyz-utils-security-module"></span><h2>toyz.utils.security module<a class="headerlink" href="#module-toyz.utils.security" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="toyz.utils.security.decrypt_pickle">
<tt class="descclassname">toyz.utils.security.</tt><tt class="descname">decrypt_pickle</tt><big>(</big><em>app_settings</em>, <em>key</em><big>)</big><a class="headerlink" href="#toyz.utils.security.decrypt_pickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the provided key to decrypt the config file. Not yet supported</p>
</dd></dl>

<dl class="function">
<dt id="toyz.utils.security.encrypt_pickle">
<tt class="descclassname">toyz.utils.security.</tt><tt class="descname">encrypt_pickle</tt><big>(</big><em>app_settings</em><big>)</big><a class="headerlink" href="#toyz.utils.security.encrypt_pickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Encrypt the app settings using a config file. Not yet supported</p>
</dd></dl>

</div>
<div class="section" id="toyz-utils-third-party-settings-module">
<h2>toyz.utils.third_party_settings module<a class="headerlink" href="#toyz-utils-third-party-settings-module" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-toyz.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-toyz.utils" title="Permalink to this headline">¶</a></h2>
<p>Common non-package specific utility functions</p>
</div>
</div>


          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Fred Moolekamp.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>